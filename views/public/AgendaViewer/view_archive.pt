<tal:block define="global view here;
                   global model view/REQUEST/model;
                   global currentmonth request/month | options/month | view/currentmonth;
                   global currentyear request/year | options/year | view/currentyear;
                   global months view/get_months;
                   global results python:model.get_items_by_date(currentmonth, currentyear);
                   global user_role view/get_user_role;
                   global silva_root view/silva_root;
                   global mangle modules/Products/Silva/mangle;
                   " />

<style type="text/css">
table.listing a:link {
  text-decoration: none;
}
table.listing a:visited {
  text-decoration: none;
}
</style>

<h2 style="margin-bottom:0.5em">Archive of <span tal:replace="model/get_title">View Archive</span></h2>

<table class="listing">
  <tr class="divider">
    <td colspan="14"></td>
  </tr>

      <tbody>
        <tr class="even">
          <td>
            <a href="3" tal:content="structure python: '<<&nbsp;%s' % str(int(currentyear) - 1)" tal:attributes="href python:'?month=%s&year=%s&view=view_archive' % (currentmonth, int(currentyear) - 1)">2001</a>
          </td>
          <tal:repeat repeat="month months">
            <tal:define define="id repeat/month/index">
              <td align="center" tal:attributes="style python:test(id == int(currentmonth) - 1, 'background-color: #829199;;', '');">
                <a href="#" tal:content="month" tal:attributes="href python: '?month=%s&year=%s&view=view_archive' % (id + 1, currentyear)"></a>
              </td>
            </tal:define>
          </tal:repeat>
          <td>
            <a href="3" tal:content="structure python: '%s&nbsp;>>' % str(int(currentyear) + 1)" tal:attributes="href python:'?month=%s&year=%s&view=view_archive' % (currentmonth, int(currentyear) + 1)">2003</a>
          </td>
        </tr>
      </tbody>

<tal:comment condition="nothing">Begin PublicationTable</tal:comment>


<span tal:replace="nothing"> ______________ table header ______________ </span>
<tr tal:condition="python:len(results) != 0">
<th align="left" width="20%" colspan="3" nowrap="1">Date</th>
<th align="left" colspan="8">view</th>
<th align="left" width="20%" colspan="3">Author</th>
</tr>

<span tal:replace="nothing"> ______________ listing iteration ______________ </span>
<toc_entry tal:omit-tag=""
  tal:repeat="obj results">
<cycle tal:define="oddrow repeat/obj/odd" tal:omit-tag="">
<tr tal:attributes="class python:test(oddrow, 'odd', 'even')"
  tal:define="object obj/getObject">

<span tal:replace="nothing"> _______ date _______ </span>
<td nowrap="1" valign="top" align="left" colspan="3">
<span tal:replace="structure python:mangle.DateTime(object.publication_datetime()).toStr()" />
</td>

<span tal:replace="nothing"> _______ title cell _______ </span>
<td valign="top" align="left" colspan="8">
<tal:block condition="python:object.get_title() != ''">
<a title="View this item"
  tal:attributes="href python: object.object().absolute_url()">
<b tal:content="object/get_title">title</b>
</a>
</tal:block>
<tal:block condition="python:object.get_title() == ''">
<img style="height:100%" width="32" height="18" align="left"
  tal:attributes="src string:${silva_root}/globals/pixel.gif" />
<a title="View this item"
  tal:attributes="href python: object.object().absolute_url()">
<span tal:replace="obj/id">title</span>
</a>
</tal:block>
</td>

<span tal:replace="nothing"> _______ author _______ </span>
<td nowrap="1" valign="top" align="left" colspan="3">
<span tal:replace="python:object.last_author_fullname()" />
</td>

</tr>


</cycle>
</toc_entry>

<span tal:replace="nothing"> ______________ if no records ______________ </span>
<check tal:condition="python:len(results) == 0">
<tr class="divider">
<td colspan="14"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" /></td>
</tr>
<tr class="odd">
<td colspan="14">
There are no articles for this period.
</td>
</tr>
<tr class="divider">
<td colspan="14"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" /></td>
</tr>
</check>
<!-- /iteration -->

      <tbody>
        <tr class="controls">
          <td colspan="14"></td>
        </tr>

        <tr>
          <td>
            <a href="3" tal:content="structure python: '<<&nbsp;%s' % str(int(currentyear) - 1)" tal:attributes="href python:'?month=%s&year=%s&view=view_archive' % (currentmonth, int(currentyear) - 1)">2001</a>
          </td>
          <tal:repeat repeat="month months">
            <tal:define define="id repeat/month/index">
              <td align="center" tal:attributes="style python:test(id == int(currentmonth) - 1, 'background-color: #829199;;', '');">
                <a href="#" tal:content="month" tal:attributes="href python: '?month=%s&year=%s&view=view_archive' % (id + 1, currentyear)"></a>
              </td>
            </tal:define>
          </tal:repeat>
          <td>
            <a href="3" tal:content="structure python: '%s&nbsp;>>' % str(int(currentyear) + 1)" tal:attributes="href python:'?month=%s&year=%s&view=view_archive' % (currentmonth, int(currentyear) + 1)">2003</a>
          </td>
        </tr>
  
        <tr class="controls">
    <td class="align-right" colspan="14">
      <form tal:attributes="action model/absolute_url" method="post">
        <input style="border-width:1px;" type="text" name="query" />
        <input class="button" style="border:1px solid #6bb591;" type="submit" value="Search" title="Do a full text search: alt-s" accesskey="s"/>
            </form>
          </td>
        </tr>
      </tbody>
    </table>

<a href="#" tal:attributes="href string:?view=view_agenda">View Agenda</a>
