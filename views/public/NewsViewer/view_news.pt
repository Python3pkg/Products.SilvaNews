<span
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva_news"
  tal:define="view here;
              model view/REQUEST/model;
              results python:model.get_items();
              silva_root view/silva_root;
              mangle modules/Products/Silva/mangle;"
>

<h2><span tal:replace="model/get_title">View News</span></h2>

<table class="listing">
  <tr class="divider">
    <td></td>
  </tr>

  <span tal:replace="nothing"> ______________ listing iteration ______________ </span>
  <tal:block tal:omit-tag=""
    tal:repeat="brain results">
  <tal:block define="obj python:brain.getObject()">

  <tr class="even">
    <td>
      <h4 tal:content="structure obj/get_title">title</h4>
      <tal:block condition="obj/get_intro">
        <tal:block content="structure obj/get_intro">Lead</tal:block><br />
      </tal:block>
      <span tal:replace="structure python: 'Start date/time: %s<br />' % mangle.DateTime(obj.start_datetime()).toStrOptionalTime()"
        tal:condition="obj/start_datetime | nothing">DateTime</span>
      <a tal:attributes="href python:obj.object().absolute_url()" i18n:translate="">view article</a>
      <br /><br />
    </td>
  </tr>

</tal:block>
</tal:block>

  <span tal:replace="nothing"> ______________ if no records ______________ </span>
  <check tal:condition="python:len(results) == 0">
  <tr class="even">
    <td>
      <i i18n:translate="">There are no articles available.</i>
    </td>
  </tr>
  </check>
  
  <tr class="controls">
    <td class="align-right">
      <form tal:attributes="action model/absolute_url" method="post">
        <input type="text" name="query" />&nbsp;
        <input class="button"
          type="submit"
          value="search"
          title="Do a full text search: alt-s"
          accesskey="s"
          i18n:attributes="title value" />
      </form>
    </td>
  </tr>

<span tal:replace="nothing"> _______ /iteration _______ </span>

</table>

<a href="#" tal:attributes="href string:?view=view_archive" i18n:translate="">View archive</a>

</span>
