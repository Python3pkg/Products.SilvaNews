<tal:block define="global view here;
                   global model view/REQUEST/model;
                   global results python:model.get_items();
                   global silva_root view/silva_root;
                   global mangle modules/Products/Silva/mangle;
                   " />

<h2 style="margin-bottom:0.4em"><span tal:replace="model/get_title">View News</span></h2>

<table class="listing">
  <tr class="divider">
    <td></td>
  </tr>

  <span tal:replace="nothing"> ______________ listing iteration ______________ </span>
  <tal:block tal:omit-tag=""
    tal:repeat="brain results">
  <tal:block define="obj python:brain.getObject()">

  <tr class="even">
    <td style="border-bottom-width:2px;">
      <h4 style="margin-top:0.5em"
        tal:content="structure obj/get_title">title</h4>
      <h5 style="margin-top:0.3em"
        tal:content="structure obj/subheader"
        tal:condition="obj/subheader">subheader</h5>
      <b tal:content="structure string:${obj/lead}<br />"
        tal:condition="obj/lead">Lead</b>
      <span tal:replace="structure python: 'Start date/time: %s<br />' % mangle.DateTime(obj.start_datetime()).toStr()"
        tal:condition="obj/start_datetime | nothing">DateTime</span>
      <a tal:attributes="href python:obj.object().absolute_url()">view article</a>
      <br /><br />
    </td>
  </tr>

</tal:block>
</tal:block>

  <span tal:replace="nothing"> ______________ if no records ______________ </span>
  <check tal:condition="python:len(results) == 0">
  <tr class="even">
    <td>
      <i>There are no articles available.</i>
    </td>
  </tr>
  </check>
  
  <tr class="controls">
    <td class="align-right">
      <form tal:attributes="action model/absolute_url" method="post">
        <input style="border-width:1px" 
          type="text" 
          name="query" />&nbsp;
        <input class="button"
          style="border:1px solid #6bb591;"
          type="submit"
          value="search"
          title="Do a full text search: alt-s"
          accesskey="s" />
      </form>
    </td>
  </tr>

<span tal:replace="nothing"> _______ /iteration _______ </span>

</table>

<a href="#" tal:attributes="href string:?view=view_archive">View archive</a>
