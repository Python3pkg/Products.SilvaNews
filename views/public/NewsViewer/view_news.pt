<html tal:omit-tag=""
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva_news"
  tal:define="
    view here;
    model request/model;
    results python:model.get_items();
    silva_root view/silva_root;
    formatdate nocall:view/service_news/format_date;
">

<h2 class="heading" tal:content="model/get_title"
  tal:condition="not:request/other/suppress_title | request/model/suppress_title | nothing">View News</h2>

<div class="searchbox">
  <form tal:attributes="action model/absolute_url" method="post">
    <input type="text" name="query" />
    <input class="button"
      type="submit"
      value="Search"
      title="Do a full text search: alt-s"
      accesskey="s"
      i18n:attributes="title;value"
    />
  </form>
</div>

<div class="newsitem" tal:repeat="r results">
 <tal:def define="obj r/getObject">
  <metal:macro use-macro="here/newsitem_macro/macros/newsitem" />
 </tal:def>
</div>

<p class="p newsmessage"
  tal:condition="python: len(results) < 1"
  i18n:translate="">
  There are no articles available.
</p>

  <p class="p archivelink">
    <a tal:attributes="href string:?view=view_archive"
     i18n:translate="">
     view archive
   </a>
  </p>
</html>
