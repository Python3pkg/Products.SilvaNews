<span
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva_news"
  tal:define="view here;
              model view/REQUEST/model;
              results python:model.get_items();
              silva_root view/silva_root;
              formatdate nocall:view/service_news/format_date;
              "
>

  <div class="margins">
    <h2 class="heading" tal:content="model/get_title">View News</h2>
  </div>

  <tal:comment condition="nothing">Begin items</tal:comment>

  <div class="searchbox">
    <form tal:attributes="action model/absolute_url" method="POST">
      <input type="text" name="query" />
      <input type="submit" class="button" value="Search" title="Do a full text search: alt-s"
              accesskey="s" i18n:attributes="title value" />
    </form>
  </div>

  <div class="item" tal:repeat="object results">
    <tal:block define="obj object/getObject">
      <h2 class="heading" tal:content="structure obj/get_title" />
      <div class="intro" tal:define="classname python: test(repeat['object'].odd(), 'odd_newsitem_thumbnail', 'even_newsitem_thumbnail')">
        <img tal:replace="structure python: obj.get_thumbnail(classname)" />
        <span tal:replace="structure obj/get_intro" />
      </div>
      <p class="datetime">
        <tal:block condition="obj/start_datetime | nothing">
          <span i18n:translate="">Startdate/time:</span>
          <span tal:replace="
                  structure python: formatdate(obj.start_datetime(), obj.display_time())">
            DateTime
          </span><br />
        </tal:block>
        <tal:block condition="obj/end_datetime | nothing">
          <span i18n:translate="">Enddate/time:</span>
          <span tal:replace="
                  structure python: formatdate(obj.end_datetime(), obj.display_time())">
            DateTime
          </span>
        </tal:block>
      </p>
      <p class="articlelink">
        <a href="#" tal:attributes="href python:obj.get_content().absolute_url()" i18n:translate="">
          view article</a>
      </p>
    </tal:block>
  </div>

  <div class="item" tal:condition="python: len(results) < 1" i18n:translate="">
    There are no articles available
  </div>

  <div class="viewlinks">
    <div class="viewlink">
      <a href="#" tal:attributes="href string:?view=view_archive" i18n:translate="">view archive</a>
    </div>
  </div>

</span>
