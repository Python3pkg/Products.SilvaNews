<html tal:omit-tag=""
  tal:define="
    view here;
    model request/model;
    root_url model/get_root_url;
    user_role view/get_user_role;
    silva_root view/silva_root;
    title model/get_title_editable;
    vein string:edit;
    fields view/form/get_fields;
">

<table class="columns columns3">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">


  <form action="." name="silvaObjects" method="POST">
    <script type="text/javascript">
      
      function focus_editor() {
        /* focus the RSS feed input field if we're the RSS Viewer's edit page */
        var form = document.forms[0];
        if (form && form.field_rss_feed) {
          form.field_rss_feed.focus();
        } else if (form && form.field_rss_feeds) {
          form.field_rss_feeds.focus();
        };
      };
      
    </script>
    <table class="listing">
      <thead>
        <tal:block replace="nothing">
          ______________ vein + title row ______________
        </tal:block>
        <tr>
          <td class="top"
            colspan="3">
            <h2>
              <img tal:replace="structure python:view.render_icon(model)" />
              <span style="text-transform:lowercase;"
                tal:content="model/meta_type">Meta type</span> 
              &#xab;<tal:block content="model/get_title_or_id" />&#xbb;
              settings
            </h2>
          </td>
        </tr>
      </thead>

      <span tal:replace="nothing"> ______________ table header ______________ </span>
      <tbody>
        <tr>
          <th class="align-right" 
            width="3%">element</th>
          <th width="50%">content</th>
          <th>note</th>
        </tr>

        <span tal:replace="nothing"> -------------- form content ------------- </span>
        <tal:block tal:repeat="field fields">
          <tr class="even" tal:attributes="class python: test(repeat['field'].odd(), 'odd', 'even')">
            <td class="field-title">
              <nobr>
                <span tal:replace="field/title">Title</span><span class="warning" tal:condition="field/is_required">*</span>
              </nobr>
            </td>
            <td tal:content="structure field/render">
              field
            </td>
            <td tal:content="field/description">
              description
            </td>
          </tr>
        </tal:block>

      </tbody>

      <tfoot>
        <tr class="controls">
          <td class="align-right"
            colspan="4">
            <input class="button" 
              type="submit"
              name="submit_settings:method"
              value="save settings"
              title="access key: alt-s"
              accesskey="s"
            />
          </td>
        </tr>
      </tfoot>
    </table>
  </form>

      </td>
      <tal:block replace="nothing">
        _____________________ right column _____________________
      </tal:block>
      <td class="right">
        <div class="info"
          tal:condition="python: model.meta_type in ['Silva News Viewer',  'Silva Agenda Viewer']">
          <h3>
            RDF Feed
          </h3>
          <p>
            This News Viewer will supply an RSS feed using RDF.
            The URL of the feed is: 
            <a tal:attributes="href string:${model/absolute_url}/rss.xml">
              <span tal:replace="string:${model/absolute_url}/rss.xml">feed</span>
            </a>
          </p>
        </div>
      </td>
    </tr>
  </tbody>
</table>

</html>
