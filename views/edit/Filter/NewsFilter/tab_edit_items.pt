<tal:define define="global location string:Edit" />
<!-- ___________________________ start index_html ______________________ -->
<html  metal:use-macro="here/macro_index/macros/master">
<div metal:fill-slot="main" tal:omit-tag="">
<!-- ___________________________ start index_html/slot main ____________________________ -->

<tal:block define="global view here;
                   global model here/REQUEST/model;
                   global user_role view/get_user_role;
                   global silva_root view/silva_root;
                   global results python:model.get_all_items();
                   global startat python:path('request/start | nothing') or path('options/startat | nothing') or 0;
                   global batch python:modules['ZTUtils'].Batch(results, size=10, start=int(startat));
                   global objects python:view.prepare_objects(batch);
                   global previous python:batch.previous;
                   global next python:batch.next;
                   " />

<div class="margins">
<h2>Manage <span class="folder-title" tal:content="structure string:&raquo;${model/get_title_html}&laquo;">title here</span></h2>
</div>

<tal:comment condition="nothing">Begin PublicationTable</tal:comment>

<form action="." name="silvaObjects" method="POST">

<table width="100%" cellspacing="0" cellpadding="3" border="0"
  tal:attributes="cellspacing container/table_cellspacing;
                  cellpadding container/table_cellpadding;
                  border container/table_border">


<span tal:replace="nothing"> ______________ table header ______________ </span>
<tr tal:condition="python:len(objects) != 0">
<th align="left" width="3%" nowrap="1">In use</th>
<th align="left" width="12%">Edit</th>
<th align="left">View</th>
<th align="left" width="9%">Publish&nbsp;date&nbsp;</th>
<th align="left" width="9%">Expiration&nbsp;date&nbsp;</th>
</tr>

<span tal:replace="nothing"> ______________ listing iteration ______________ </span>
<toc_entry tal:omit-tag=""
  tal:repeat="object objects">
<tal:define define="obj object/object;
                    id object/index;
                    object_status obj/version_status;
                    object_url python: '/'.join(obj.object_path);
                    ">
<cycle tal:define="oddrow repeat/object/odd" tal:omit-tag="">
<tr class="focus-cycle"
  tal:attributes="class python:test(oddrow, 'focus', 'focus-cycle')">

<span tal:replace="nothing"> _______ checkbox + icon _______ </span>
<td nowrap="1">
<input type="checkbox" name="cb:list" value="value"
 tal:attributes="value string:cb_${id}; checked object/check_checkbox" />
<a href="edit" title="Edit this item"
  tal:attributes="href string:${object_url}/edit/tab_edit">
<img tal:replace="structure python:view.render_icon(obj.meta_type)" />
</a>
</td>

<span tal:replace="nothing"> _______ id cell _______ </span>
<td>
<a title="Edit this item"
  tal:attributes="href string:${object_url}/edit;
                  class python:view.get_status_style(object_status)"
  tal:content="obj/id">id
</a>
</td>

<span tal:replace="nothing"> _______ title cell _______ </span>
<td>
<tal:block condition="python:obj.get_title_html != ''">
<img style="height:100%" width="32" height="18" align="left"
  tal:attributes="src string:${silva_root}/globals/pixel.gif" />
<a class="blacklink" title="Preview this item"
  tal:attributes="href string:${object_url}">
<b tal:content="structure string:${obj/get_title_html}">title</b>
</a>
</tal:block>
<tal:block condition="object/check_checkbox">
&nbsp;(Selected)
</tal:block>
<tal:block condition="python:obj.get_title_html == ''">
&nbsp;
</tal:block>
</td>

<span tal:replace="nothing"> _______ publish date cell _______ </span>
<td>
<tal:block define="publication_dt obj/publication_datetime">
  <tal:block condition="publication_dt">
    <span tal:replace="structure python: view.service_utils.frontend_datetime_to_str(publication_dt)" tal:omit-tag="">21 oct 2001 18:18</span>
  </tal:block>
  <tal:block condition="not: publication_dt">
    None
  </tal:block>
</tal:block>
</td>

<span tal:replace="nothing"> _______ expiration date cell _______ </span>
<td>
<span tal:condition="object_status">
  <tal:block define="expiration_dt obj/expiration_datetime">
  <tal:block condition="expiration_dt">
    <span tal:replace="structure python: view.service_utils.frontend_datetime_to_str(expiration_dt)" tal:omit-tag="">21 oct 2001 18:18</span>
  </tal:block>
  <tal:block condition="not: expiration_dt">
    None
  </tal:block>
</tal:block>
</span>
<span tal:condition="not: object_status"
  tal:omit-tag="">&nbsp;</span>
&nbsp;
</td>

</tr>

</cycle>
</tal:define>
</toc_entry>

<span tal:replace="nothing"> ______________ if no records ______________ </span>
<check tal:condition="python:len(objects) == 0">
<tr class="divider">
<td colspan="5"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" /></td>
</tr>
<tr class="focus-light">
<td colspan="5">
There are no publishable objects in this folder.
</td>
</tr>
<tr class="divider">
<td colspan="5"><img tal:attributes="src string:${silva_root}/globals/pixel.gif" width="1" height="1" /></td>
</tr>
</check>
<!-- /iteration -->


<check tal:condition="python:len(objects) != 0">
<script type="text/javascript">
<!--
isSelected = false;

function toggleSelect() {
  if (isSelected == false) {
    for (i = 0; i < document.silvaObjects.length; i++)
      document.silvaObjects.elements[i].checked = true ;
      isSelected = true;
      document.silvaObjects.selectButton.value = "Deselect all";
      return isSelected;
  }
  else {
    for (i = 0; i < document.silvaObjects.length; i++)
      document.silvaObjects.elements[i].checked = false ;
      isSelected = false;
      document.silvaObjects.selectButton.value = "Select all";
      return isSelected;
  }
}
//-->
</script>

<span tal:replace="nothing"> ______________ controls for chief ______________ </span>
<tr class="controls"
  tal:condition="python:user_role == 'Editor'">
<td colspan="5">
<script type="text/javascript">
<!--
if (document.forms[0]) {
  document.write('<input class="button" type="submit" name="selectButton" value="Select all" title="Select all items on and below this level" onClick="toggleSelect(); return false">')
  }
//-->
</script>
&nbsp;
<input type="hidden" name="start" tal:attributes="value startat">
<input class="button" type="submit" name="use_items:method" value="Use items" title="Use selected items in this filter" />
&nbsp;
</td>
</tr>

</check>

</table>

</form>

<table width="100%">
<tr>
<td width="50%" align="left">&nbsp;<a href="#" tal:attributes="href string:${model/absolute_url}/edit/tab_edit_items?start:int=${previous/first}" tal:condition="previous">Previous</a></td>
<td width="50%" align="right">&nbsp;<a href="#" tal:attributes="href string:${model/absolute_url}/edit/tab_edit_items?start:int=${next/first}" tal:condition="next">Next</a></td>
</tr>
</table>

<!-- ___________________________ end index_html/slot main ____________________________ -->
</div>
</html>
<!-- ___________________________ end index_html ______________________________________ -->
