<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:settings;
    global active_tab string:tab_metadata;
    global parent_screen_name string:tab_properties;"
  i18n:domain="silva_news">

<metal:block use-macro="here/macro_index/macros/master">
  
<metal:block metal:fill-slot="middleground">
  <metal:block use-macro="here/macro_middleground/macros/properties" />
</metal:block>

<metal:block fill-slot="main">
    <table class="columns columns2"
      tal:define="
        icon python:view.render_icon(model);"
      >
      <tbody>
        <tr>
          <tal:block replace="nothing">_____________________ sidebar _____________________</tal:block>
          <td class="left" rowspan="99">
            <metal:block use-macro="view/macro_vein_navigation/macros/vein">
              <metal:fill-slot fill-slot="sidebar">
                <tal:block replace="structure python: view.service_sidebar.render(model, 'tab_settings', vein)" />
              </metal:fill-slot>
            </metal:block>
          </td>
          <tal:block replace="nothing">_____________________ main _____________________</tal:block>
          <td class="main">
            
            <form action="." method="post">
              <table class="listing"
                tal:define="
                  editable model/get_editable;
                  rendererservice context/service_renderer_registry;
                  renderers python: rendererservice.getFormRenderersList(type);
                  default_document model/get_default;
                  publishables model/get_processed_items;
                  assets model/get_processed_assets;
                  ids options/ids | python: [];
                  position request/position | options/position | nothing;
                  iterate string:odd;
                  ct python: mangle.String.centeredTruncate;"
                tal:condition="python: editable"
              >
                <thead>
                  <tr>
                    <td class="top" colspan="3">
                      <h2 tal:attributes="title string:id: ${model/id}">
                        <img tal:replace="structure icon" />
                        <span i18n:translate="">settings for &#xab;<tal:block 
                          content="title"
                          i18n:name="title" />&#xbb;</span>
                      </h2>
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr class="top-controls">
                    <td colspan="3">
                      <h3>
                        <tal:translate i18n:translate="">local news source setting</tal:translate>
                      </h3>
                    </td>
                  </tr>
                <tr class="odd">
                  <td i18n:translate="" colspan="2">
                    Make news source local so it is picked up only by filters in the same path of the source and below.
                  </td>
                  <td class="align-right">
                    <label id="make_local">
                     <tal:translate i18n:translate="">make local?</tal:translate>
                      <input type="checkbox"
                        name="is_private"
                        id="make_local"
                        tal:attributes="checked model/is_private"
                      />
                    </label>
                  </td>
                </tr>
  
                <tr class="controls">
                  <td class="align-right"
                    colspan="3">
                    <input class="button"
                      type="submit" 
                      name="settings_submit:method" 
                      value="change setting"
                      title="change the global/local status of the news publication: alt-h"
                      accesskey="h"
                      i18n:attributes="title;value"
                    />
                  </td>
                </tr>
                <tr>
                  <td class="separator"
                    colspan="4">
                  </td>
                </tr> 
                <tr class="top-controls">
                  <td colspan="3">
                    <h3>
                      <span i18n:translate="">content renderer</span>
                    </h3>
                  </td>
                </tr>
                <tr>
                  <th class="align-right"
                    width="12%"
                    i18n:translate="">
                    element
                  </th>
                  <th i18n:translate="">
                    content
                  </th>
                  <th width="25%"
                    i18n:translate="">
                    note
                  </th>
                </tr>
                <tr class="odd">
                  <td class="align-right">
                    <tal:block i18n:translate="">
                      renderer
                    </tal:block>
                  </td>
                  <td>
                    <select class="store" name="renderer_name_select">
                      <tal:block 
                        define="selected_renderer_name python: editable.get_renderer_name()" 
                        repeat="renderer_name renderers">
                        <option
                          tal:content="renderer_name" 
                          tal:attributes="
                            value python:renderer_name;
                            selected python: selected_renderer_name == renderer_name and 'selected' or None;">
                        </option>
                      </tal:block>
                    </select>
                  </td>
                  <td>
                    <tal:block i18n:translate="">
                      Select a renderer to render this content.
                    </tal:block>
                  </td>
                </tr>
                <tr class="controls">
                  <td class="align-right" colspan="3">
                    <input class="button" 
                      value="change renderer"
                      name="tab_settings_save_renderer:method"
                      type="submit"
                      title="change renderer: alt-c"
                      accesskey="c"
                      i18n:attributes="value;title"
                    />
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </td>            
      </tr>

      <tal:block replace="nothing">layout settings</tal:block>
      <tr>
        <td class="main">
          <tal:block 
            define="category python: 'layout';"
            condition="model/implements_versioning">
            <tal:block replace="nothing">edit editable version metadata</tal:block>
            <tal:block 
              define="content model/get_editable | nothing;"
              condition="model/get_unapproved_version">
              <!-- editable version metadata table, thus editable -->
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure icon" />
                  <span i18n:translate=""> layout settings for &#xab;<tal:block 
                    content="title"
                    i18n:name="title" />&#xbb;</span>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block replace="nothing">view previewable version metadata</tal:block>
            <tal:block 
              define="content model/get_previewable | nothing;"
              condition="model/get_approved_version">
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure icon" />
                  <tal:block i18n:translate="">layout settings</tal:block>
                  <span i18n:translate="">
                    for approved version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block replace="nothing">view public version metadata</tal:block>
            <tal:block 
              define="
                content model/get_viewable | nothing;
                display_flag python:0"
              condition="model/get_public_version"
              >
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure icon" />
                  <tal:block i18n:translate="">layout settings</tal:block>
                  <span i18n:translate="">
                    for published version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
            
            <tal:block replace="nothing">view closed version metadata</tal:block>
            <tal:block 
              define="
                content model/get_last_closed | nothing;
                display_flag python:0"
              condition="
                python: not model.get_next_version() and not model.get_public_version()"
              >
              <metal:block use-macro="here/macro_view_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure icon" />
                  <tal:block i18n:translate="">layout settings</tal:block>
                  <span i18n:translate="">
                    for closed version of
                    &#xab;<span tal:replace="string:${title}" i18n:name="title">title</span>&#xbb;
                  </span>
                </h2>
              </metal:block>
            </tal:block>
          </tal:block>
          
          <tal:block replace="nothing">edit single version metadata</tal:block>
          <tal:block 
            define="category python: 'layout';"
            condition="not: model/implements_versioning">
            <tal:block define="content model">
              <metal:block use-macro="here/macro_edit_metadata/macros/metadata">
                <h2 metal:fill-slot="table_title">
                  <img tal:replace="structure icon" />
                  <span i18n:translate=""> layout settings for &#xab;<tal:block 
                    content="title"
                    i18n:name="title" />&#xbb;</span>
                </h2>
              </metal:block>
            </tal:block>
          </tal:block>
        </td>            
      </tr>
      
    </tbody>
  </table>
</metal:block>

</metal:block>

</html>

