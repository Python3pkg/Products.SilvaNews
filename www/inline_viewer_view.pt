<html tal:omit-tag="" 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/tal/i18n"
  xmlns:notal="http://www.infrae.com/namespaces/notal"
  tal:define="
    model request/model;
    viewer options/viewer;
    viewerobj python:here.get_viewer_obj(viewer);
    limit python:int(options['number_of_articles']);
    items python:here.get_items(limit, viewer);
    separate python:options['show_link_article'] == 'separate';
    mangle modules/Products/Silva/mangle;
">
<p class="p newsmessage"
  tal:condition="not: viewerobj">
  Sorry, no viewer is available.
</p>

<tal:if tal:condition="viewerobj">
<div tal:attributes="class options/inv_div | nothing">

<h3 tal:condition="python:options['show_title']=='1'"
  tal:content="python: viewerobj.get_title()">
  title
</h3>

<tal:loop condition="python:len(items) > 0"
  repeat="item items">
<div class="newsitem">
<h4 class="heading">
  <a tal:define="title item/title"
    tal:content="structure title"
    tal:attributes="href item/link"
    tal:omit-tag="separate"
    >
    title
  </a>
</h4>

<tal:set define="maxchars python: int(options['number_of_characters'])">
<p class="p newslead" tal:define="intro python:item.intro(maxchars)"
    tal:content="structure intro"
    tal:condition="python: options['show_intro']=='intro'">
  Lead
</p>
<p class="p newslead" tal:define="intro python: item.description(maxchars)"
    tal:content="structure intro"
    tal:condition="python:(not item.intro() or options['show_intro']=='description')">
  Lead
</p>
</tal:set>

<p class="p newsiteminfo">
  <span i18n:translate="" 
    tal:condition="python:(int(options['show_creationdate']) and 
      item.creation_datetime())">
    Creation date/time: 
    <span i18n:name="datetime" 
      tal:replace="python:mangle.DateTime(item.creation_datetime()).toStr()"
      tal:condition="python:int(options['show_creationdate'])">
      date
    </span><br />
  </span>
  <span tal:condition="python: item.start_datetime() and options['show_datetime']=='1'"
    i18n:translate="">
    Start date/time:
    <span i18n:name="datetime"
      tal:replace="python:mangle.DateTime(item.start_datetime()).toStr()">
      date
    </span><br />
  </span>
  <span i18n:translate="" tal:condition="item/end_datetime">
    End date/time:
    <span i18n:name="datetime"
      tal:replace="python:mangle.DateTime(item.end_datetime()).toStr()">
      date
    </span><br />
  </span>
  <span i18n:translate="" 
    tal:condition="python: (int(options['show_location']) and item.location())">
    Location:
    <span i18n:name=""
      tal:replace="item/location">
      location
    </span><br />
  </span>
  <tal:if condition="separate">
    <a tal:attributes="href item/link"
      tal:content="structure options/link_text_article">
      view item
    </a>
  </tal:if>
</p>

</div>
</tal:loop>

<p class="p newsmessage"
  tal:condition="python:len(items) <= 0">
  No articles are available.
</p>

<p class="p newsviewer-otherarticles"
  tal:condition="python:options['show_link']=='1'">
  <br />
  <a tal:content="structure options/link_text_viewer"
    tal:attributes="href python:viewerobj.absolute_url()">
    View other articles...
  </a>
</p>

<metal:plug use-macro="here/feed_footer/macros/footer" /> 

</div>
</tal:if>
</html>
